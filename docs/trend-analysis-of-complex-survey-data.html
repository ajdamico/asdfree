<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Trend Analysis of Complex Survey Data | Analyze Survey Data for Free</title>
  <meta name="description" content="Trend Analysis of Complex Survey Data | Analyze Survey Data for Free" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Trend Analysis of Complex Survey Data | Analyze Survey Data for Free" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="ajdamico/asdfree" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Trend Analysis of Complex Survey Data | Analyze Survey Data for Free" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="structural-equation-models-sem-with-complex-survey-data.html"/>
<link rel="next" href="youth-risk-behavior-surveillance-system-yrbss.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Analyze Survey Data for Free</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Public Microdata, Easy to Type Website</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html"><i class="fa fa-check"></i>American Community Survey (ACS)</a>
<ul>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#download-import-preparation"><i class="fa fa-check"></i>Download, Import, Preparation</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#analysis-examples-with-the-survey-library"><i class="fa fa-check"></i>Analysis Examples with the <code>survey</code> library  </a>
<ul>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#variable-recoding"><i class="fa fa-check"></i>Variable Recoding</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#unweighted-counts"><i class="fa fa-check"></i>Unweighted Counts</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#weighted-counts"><i class="fa fa-check"></i>Weighted Counts</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive Statistics</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#subsetting"><i class="fa fa-check"></i>Subsetting</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#measures-of-uncertainty"><i class="fa fa-check"></i>Measures of Uncertainty</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#regression-models-and-tests-of-association"><i class="fa fa-check"></i>Regression Models and Tests of Association</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#intermish"><i class="fa fa-check"></i>Intermish</a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#poverty-and-inequality-estimation-with-convey"><i class="fa fa-check"></i>Poverty and Inequality Estimation with <code>convey</code>  </a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#analysis-examples-with-srvyr"><i class="fa fa-check"></i>Analysis Examples with <code>srvyr</code>  </a></li>
<li class="chapter" data-level="" data-path="american-community-survey-acs.html"><a href="american-community-survey-acs.html#technical-documentation-replication-example"><i class="fa fa-check"></i>Technical Documentation Replication Example</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="structural-equation-models-sem-with-complex-survey-data.html"><a href="structural-equation-models-sem-with-complex-survey-data.html"><i class="fa fa-check"></i>Structural Equation Models (SEM) with Complex Survey Data</a>
<ul>
<li class="chapter" data-level="" data-path="structural-equation-models-sem-with-complex-survey-data.html"><a href="structural-equation-models-sem-with-complex-survey-data.html#load-the-2008-wave-of-the-european-social-survey-german-and-spanish-microdata"><i class="fa fa-check"></i>Load the 2008 Wave of the European Social Survey German and Spanish Microdata</a></li>
<li class="chapter" data-level="" data-path="structural-equation-models-sem-with-complex-survey-data.html"><a href="structural-equation-models-sem-with-complex-survey-data.html#two-factor-cfa-of-attitudes-toward-the-welfare-state"><i class="fa fa-check"></i>Two-factor CFA of attitudes toward the welfare state</a></li>
<li class="chapter" data-level="" data-path="structural-equation-models-sem-with-complex-survey-data.html"><a href="structural-equation-models-sem-with-complex-survey-data.html#invariance-testing-on-schwarz-human-values-while-accounting-for-the-survey-design."><i class="fa fa-check"></i>Invariance testing on Schwarz human values while accounting for the survey design.</a></li>
<li class="chapter" data-level="" data-path="structural-equation-models-sem-with-complex-survey-data.html"><a href="structural-equation-models-sem-with-complex-survey-data.html#an-example-with-a-latent-variable-regression"><i class="fa fa-check"></i>An example with a Latent Variable Regression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="trend-analysis-of-complex-survey-data.html"><a href="trend-analysis-of-complex-survey-data.html"><i class="fa fa-check"></i>Trend Analysis of Complex Survey Data</a>
<ul>
<li class="chapter" data-level="" data-path="trend-analysis-of-complex-survey-data.html"><a href="trend-analysis-of-complex-survey-data.html#download-import-preparation-1"><i class="fa fa-check"></i>Download, Import, Preparation</a></li>
<li class="chapter" data-level="" data-path="trend-analysis-of-complex-survey-data.html"><a href="trend-analysis-of-complex-survey-data.html#append-polynomials-to-each-year"><i class="fa fa-check"></i>Append Polynomials to Each Year</a></li>
<li class="chapter" data-level="" data-path="trend-analysis-of-complex-survey-data.html"><a href="trend-analysis-of-complex-survey-data.html#analysis-examples-with-the-survey-library-1"><i class="fa fa-check"></i>Analysis Examples with the <code>survey</code> library  </a></li>
<li class="chapter" data-level="" data-path="trend-analysis-of-complex-survey-data.html"><a href="trend-analysis-of-complex-survey-data.html#calculate-joinpoints-needed"><i class="fa fa-check"></i>Calculate Joinpoints Needed</a></li>
<li class="chapter" data-level="" data-path="trend-analysis-of-complex-survey-data.html"><a href="trend-analysis-of-complex-survey-data.html#calculate-predicted-marginals"><i class="fa fa-check"></i>Calculate Predicted Marginals</a></li>
<li class="chapter" data-level="" data-path="trend-analysis-of-complex-survey-data.html"><a href="trend-analysis-of-complex-survey-data.html#identify-joinpoints-or-breakpoints"><i class="fa fa-check"></i>Identify Joinpoint(s) or Breakpoint(s)</a></li>
<li class="chapter" data-level="" data-path="trend-analysis-of-complex-survey-data.html"><a href="trend-analysis-of-complex-survey-data.html#make-statistically-defensible-conclusions"><i class="fa fa-check"></i>Make statistically defensible conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html"><i class="fa fa-check"></i>Youth Risk Behavior Surveillance System (YRBSS)</a>
<ul>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#download-import-preparation-2"><i class="fa fa-check"></i>Download, Import, Preparation</a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#analysis-examples-with-the-survey-library-2"><i class="fa fa-check"></i>Analysis Examples with the <code>survey</code> library  </a>
<ul>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#variable-recoding-1"><i class="fa fa-check"></i>Variable Recoding</a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#unweighted-counts-1"><i class="fa fa-check"></i>Unweighted Counts</a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#weighted-counts-1"><i class="fa fa-check"></i>Weighted Counts</a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#descriptive-statistics-1"><i class="fa fa-check"></i>Descriptive Statistics</a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#subsetting-1"><i class="fa fa-check"></i>Subsetting</a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#measures-of-uncertainty-1"><i class="fa fa-check"></i>Measures of Uncertainty</a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#regression-models-and-tests-of-association-1"><i class="fa fa-check"></i>Regression Models and Tests of Association</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#intermish-1"><i class="fa fa-check"></i>Intermish</a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#analysis-examples-with-srvyr-1"><i class="fa fa-check"></i>Analysis Examples with <code>srvyr</code>  </a></li>
<li class="chapter" data-level="" data-path="youth-risk-behavior-surveillance-system-yrbss.html"><a href="youth-risk-behavior-surveillance-system-yrbss.html#technical-documentation-replication-example-1"><i class="fa fa-check"></i>Technical Documentation Replication Example</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analyze Survey Data for Free</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="trend-analysis-of-complex-survey-data" class="section level1 unnumbered hasAnchor">
<h1>Trend Analysis of Complex Survey Data<a href="trend-analysis-of-complex-survey-data.html#trend-analysis-of-complex-survey-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/asdfree/trendy/actions"><img src="https://github.com/asdfree/trendy/actions/workflows/r.yml/badge.svg" alt="Github Actions Badge"></a></p>
<p><em>Contributed by Thomas Yokota &lt;<a href="mailto:thomasyokota@gmail.com" class="email">thomasyokota@gmail.com</a>&gt;</em></p>
<p>Professor <a href="mailto:vito.muggeo@unipa.it">Vito Muggeo</a> wrote the joinpoint analysis section of the code below and <a href="https://cran.r-project.org/web/packages/segmented/index.html">the <code>segmented</code> package</a>. Professor <a href="mailto:t.lumley@auckland.ac.nz">Dr. Thomas Lumley</a> wrote <a href="https://cran.r-project.org/web/packages/survey/NEWS">the <code>svypredmeans</code> function</a> to replicate SUDAAN’s <code>PREDMARG</code> command and match the CDC to the decimal. <a href="mailto:rxl1@cdc.gov">Dr. Richard Lowry, M.D.</a> at the Centers for Disease Control &amp; Prevention wrote <a href="https://www.cdc.gov/healthyschools/data/yrbs/pdf/yrbs_conducting_trend_analyses.pdf">the original linear trend analysis</a> and then answered our infinite questions. Thanks to everyone.</p>
<p>The purpose of this analysis is to make statistically valid statements such as, <em>“there was a significant linear decrease in the prevalence of high school aged americans who have ever smoked a cigarette across the period 1999-2011”</em> with complex sample survey data.</p>
<p>This step-by-step walkthrough exactly reproduces the statistics presented in the <a href="https://www.cdc.gov/healthyschools/data/yrbs/pdf/yrbs_conducting_trend_analyses.pdf">Center for Disease Control &amp; Prevention’s (CDC) linear trend analysis</a>. This analysis may complement qualitative evaluation on prevalence changes observed from surveillance data by providing quantitative evidence, such as when a joinpoint (also called breakpoint or changepoint) occurred; however, this analysis does not explain why or how changes in trends occur.</p>
<div id="download-import-preparation-1" class="section level2 unnumbered hasAnchor">
<h2>Download, Import, Preparation<a href="trend-analysis-of-complex-survey-data.html#download-import-preparation-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Download and import the multi-year stacked file:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="trend-analysis-of-complex-survey-data.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SAScii)</span>
<span id="cb58-2"><a href="trend-analysis-of-complex-survey-data.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb58-3"><a href="trend-analysis-of-complex-survey-data.html#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="trend-analysis-of-complex-survey-data.html#cb58-4" aria-hidden="true" tabindex="-1"></a>sas_url <span class="ot">&lt;-</span></span>
<span id="cb58-5"><a href="trend-analysis-of-complex-survey-data.html#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;https://www.cdc.gov/healthyyouth/data/yrbs/sadc_2019/2019-SADC-SAS-Input-Program.sas&quot;</span></span>
<span id="cb58-6"><a href="trend-analysis-of-complex-survey-data.html#cb58-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-7"><a href="trend-analysis-of-complex-survey-data.html#cb58-7" aria-hidden="true" tabindex="-1"></a>dat_url <span class="ot">&lt;-</span></span>
<span id="cb58-8"><a href="trend-analysis-of-complex-survey-data.html#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;https://www.cdc.gov/healthyyouth/data/yrbs/sadc_2019/sadc_2019_national.dat&quot;</span></span>
<span id="cb58-9"><a href="trend-analysis-of-complex-survey-data.html#cb58-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-10"><a href="trend-analysis-of-complex-survey-data.html#cb58-10" aria-hidden="true" tabindex="-1"></a>sas_positions <span class="ot">&lt;-</span></span>
<span id="cb58-11"><a href="trend-analysis-of-complex-survey-data.html#cb58-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">parse.SAScii</span>( sas_url )</span>
<span id="cb58-12"><a href="trend-analysis-of-complex-survey-data.html#cb58-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-13"><a href="trend-analysis-of-complex-survey-data.html#cb58-13" aria-hidden="true" tabindex="-1"></a>sas_positions[ , <span class="st">&#39;varname&#39;</span> ] <span class="ot">&lt;-</span></span>
<span id="cb58-14"><a href="trend-analysis-of-complex-survey-data.html#cb58-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tolower</span>( sas_positions[ , <span class="st">&#39;varname&#39;</span> ] )</span>
<span id="cb58-15"><a href="trend-analysis-of-complex-survey-data.html#cb58-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-16"><a href="trend-analysis-of-complex-survey-data.html#cb58-16" aria-hidden="true" tabindex="-1"></a>variables_to_keep <span class="ot">&lt;-</span></span>
<span id="cb58-17"><a href="trend-analysis-of-complex-survey-data.html#cb58-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>( <span class="st">&quot;sex&quot;</span> , <span class="st">&quot;grade&quot;</span> , <span class="st">&quot;race4&quot;</span> , <span class="st">&quot;q30&quot;</span> , <span class="st">&quot;year&quot;</span> , <span class="st">&quot;psu&quot;</span> , <span class="st">&quot;stratum&quot;</span> , <span class="st">&quot;weight&quot;</span> )</span>
<span id="cb58-18"><a href="trend-analysis-of-complex-survey-data.html#cb58-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-19"><a href="trend-analysis-of-complex-survey-data.html#cb58-19" aria-hidden="true" tabindex="-1"></a>sas_positions[ , <span class="st">&#39;column_types&#39;</span> ] <span class="ot">&lt;-</span></span>
<span id="cb58-20"><a href="trend-analysis-of-complex-survey-data.html#cb58-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ifelse</span>( <span class="sc">!</span>( sas_positions[ , <span class="st">&#39;varname&#39;</span> ] <span class="sc">%in%</span> variables_to_keep ) , <span class="st">&quot;_&quot;</span> ,</span>
<span id="cb58-21"><a href="trend-analysis-of-complex-survey-data.html#cb58-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ifelse</span>( sas_positions[ , <span class="st">&#39;char&#39;</span> ] , <span class="st">&quot;c&quot;</span> , <span class="st">&quot;d&quot;</span> ) )</span>
<span id="cb58-22"><a href="trend-analysis-of-complex-survey-data.html#cb58-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-23"><a href="trend-analysis-of-complex-survey-data.html#cb58-23" aria-hidden="true" tabindex="-1"></a>yrbss_tbl <span class="ot">&lt;-</span></span>
<span id="cb58-24"><a href="trend-analysis-of-complex-survey-data.html#cb58-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_fwf</span>(</span>
<span id="cb58-25"><a href="trend-analysis-of-complex-survey-data.html#cb58-25" aria-hidden="true" tabindex="-1"></a>        dat_url ,</span>
<span id="cb58-26"><a href="trend-analysis-of-complex-survey-data.html#cb58-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fwf_widths</span>( </span>
<span id="cb58-27"><a href="trend-analysis-of-complex-survey-data.html#cb58-27" aria-hidden="true" tabindex="-1"></a>            <span class="fu">abs</span>( sas_positions[ , <span class="st">&#39;width&#39;</span> ] ) , </span>
<span id="cb58-28"><a href="trend-analysis-of-complex-survey-data.html#cb58-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">col_names =</span> sas_positions[ , <span class="st">&#39;varname&#39;</span> ] </span>
<span id="cb58-29"><a href="trend-analysis-of-complex-survey-data.html#cb58-29" aria-hidden="true" tabindex="-1"></a>        ) ,</span>
<span id="cb58-30"><a href="trend-analysis-of-complex-survey-data.html#cb58-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">col_types =</span> <span class="fu">paste0</span>( sas_positions[ , <span class="st">&#39;column_types&#39;</span> ] , <span class="at">collapse =</span> <span class="st">&quot;&quot;</span> ) ,</span>
<span id="cb58-31"><a href="trend-analysis-of-complex-survey-data.html#cb58-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">na =</span> <span class="fu">c</span>( <span class="st">&quot;&quot;</span> , <span class="st">&quot;.&quot;</span> )</span>
<span id="cb58-32"><a href="trend-analysis-of-complex-survey-data.html#cb58-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb58-33"><a href="trend-analysis-of-complex-survey-data.html#cb58-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-34"><a href="trend-analysis-of-complex-survey-data.html#cb58-34" aria-hidden="true" tabindex="-1"></a>yrbss_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( yrbss_tbl )</span></code></pre></div>
<p>Restrict the dataset to only years shown in the original analysis and re-name the main variable:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="trend-analysis-of-complex-survey-data.html#cb59-1" aria-hidden="true" tabindex="-1"></a>yrbss_df <span class="ot">&lt;-</span> <span class="fu">subset</span>( yrbss_df , year <span class="sc">%in%</span> <span class="fu">seq</span>( <span class="dv">1991</span> , <span class="dv">2011</span> , <span class="dv">2</span> ) )</span>
<span id="cb59-2"><a href="trend-analysis-of-complex-survey-data.html#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="trend-analysis-of-complex-survey-data.html#cb59-3" aria-hidden="true" tabindex="-1"></a>yrbss_df[ , <span class="st">&#39;ever_smoked&#39;</span> ] <span class="ot">&lt;-</span></span>
<span id="cb59-4"><a href="trend-analysis-of-complex-survey-data.html#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.numeric</span>( yrbss_df[ , <span class="st">&#39;q30&#39;</span> ] <span class="sc">==</span> <span class="dv">1</span> )</span>
<span id="cb59-5"><a href="trend-analysis-of-complex-survey-data.html#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="trend-analysis-of-complex-survey-data.html#cb59-6" aria-hidden="true" tabindex="-1"></a>yrbss_df[ , <span class="st">&#39;q30&#39;</span> ] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
<p>Recode each categorical variable to factor class:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="trend-analysis-of-complex-survey-data.html#cb60-1" aria-hidden="true" tabindex="-1"></a>yrbss_df[ , <span class="st">&#39;sex&#39;</span> ] <span class="ot">&lt;-</span> <span class="fu">relevel</span>( <span class="fu">factor</span>( yrbss_df[ , <span class="st">&#39;sex&#39;</span> ] ) , <span class="at">ref =</span> <span class="st">&quot;2&quot;</span> )</span>
<span id="cb60-2"><a href="trend-analysis-of-complex-survey-data.html#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="trend-analysis-of-complex-survey-data.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ( i <span class="cf">in</span> <span class="fu">c</span>( <span class="st">&#39;race4&#39;</span> , <span class="st">&#39;grade&#39;</span> ) ){</span>
<span id="cb60-4"><a href="trend-analysis-of-complex-survey-data.html#cb60-4" aria-hidden="true" tabindex="-1"></a>    yrbss_df[ , i ] <span class="ot">&lt;-</span> <span class="fu">relevel</span>( <span class="fu">factor</span>( yrbss_df[ , i ] ) , <span class="at">ref =</span> <span class="st">&quot;1&quot;</span> )</span>
<span id="cb60-5"><a href="trend-analysis-of-complex-survey-data.html#cb60-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="append-polynomials-to-each-year" class="section level2 unnumbered hasAnchor">
<h2>Append Polynomials to Each Year<a href="trend-analysis-of-complex-survey-data.html#append-polynomials-to-each-year" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>“The polynomials we have used as predictors to this point are natural polynomials, generated from the linear predictor by centering and then powering the linear predictor.”</em></p>
<p>For more detail on this subject, see page 216 of Applied Multiple Regression/Correlation Analysis for the Behavioral Sciences By Jacob Cohen, Patricia Cohen, Stephen G. West, Leona S. Aiken</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="trend-analysis-of-complex-survey-data.html#cb61-1" aria-hidden="true" tabindex="-1"></a>distinct_years_available <span class="ot">&lt;-</span> <span class="fu">length</span>( <span class="fu">seq</span>( <span class="dv">1999</span> , <span class="dv">2011</span> , <span class="dv">2</span> ) )</span>
<span id="cb61-2"><a href="trend-analysis-of-complex-survey-data.html#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="trend-analysis-of-complex-survey-data.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co"># store the linear polynomials</span></span>
<span id="cb61-4"><a href="trend-analysis-of-complex-survey-data.html#cb61-4" aria-hidden="true" tabindex="-1"></a>c11l <span class="ot">&lt;-</span> <span class="fu">contr.poly</span>( distinct_years_available )[ , <span class="st">&quot;.L&quot;</span> ]</span>
<span id="cb61-5"><a href="trend-analysis-of-complex-survey-data.html#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="trend-analysis-of-complex-survey-data.html#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co"># store the quadratic polynomials</span></span>
<span id="cb61-7"><a href="trend-analysis-of-complex-survey-data.html#cb61-7" aria-hidden="true" tabindex="-1"></a>c11q <span class="ot">&lt;-</span> <span class="fu">contr.poly</span>( distinct_years_available )[ , <span class="st">&quot;.Q&quot;</span> ]</span>
<span id="cb61-8"><a href="trend-analysis-of-complex-survey-data.html#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="trend-analysis-of-complex-survey-data.html#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co"># store the cubic polynomials</span></span>
<span id="cb61-10"><a href="trend-analysis-of-complex-survey-data.html#cb61-10" aria-hidden="true" tabindex="-1"></a>c11c <span class="ot">&lt;-</span> <span class="fu">contr.poly</span>( distinct_years_available )[ , <span class="st">&quot;.C&quot;</span> ]</span></code></pre></div>
<p>For each record in the data set, tack on the linear, quadratic, and cubic contrast value, these contrast values will serve as replacement for the linear <code>year</code> variable in any regression:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="trend-analysis-of-complex-survey-data.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># year^1 term (linear)</span></span>
<span id="cb62-2"><a href="trend-analysis-of-complex-survey-data.html#cb62-2" aria-hidden="true" tabindex="-1"></a>yrbss_df[ , <span class="st">&quot;t11l&quot;</span> ] <span class="ot">&lt;-</span> c11l[ <span class="fu">match</span>( yrbss_df[ , <span class="st">&quot;year&quot;</span> ] , <span class="fu">seq</span>( <span class="dv">1991</span> , <span class="dv">2011</span> , <span class="dv">2</span> ) ) ]</span>
<span id="cb62-3"><a href="trend-analysis-of-complex-survey-data.html#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="trend-analysis-of-complex-survey-data.html#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># year^2 term (quadratic)</span></span>
<span id="cb62-5"><a href="trend-analysis-of-complex-survey-data.html#cb62-5" aria-hidden="true" tabindex="-1"></a>yrbss_df[ , <span class="st">&quot;t11q&quot;</span> ] <span class="ot">&lt;-</span> c11q[ <span class="fu">match</span>( yrbss_df[ , <span class="st">&quot;year&quot;</span> ] , <span class="fu">seq</span>( <span class="dv">1991</span> , <span class="dv">2011</span> , <span class="dv">2</span> ) ) ]</span>
<span id="cb62-6"><a href="trend-analysis-of-complex-survey-data.html#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="trend-analysis-of-complex-survey-data.html#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co"># year^3 term (cubic)</span></span>
<span id="cb62-8"><a href="trend-analysis-of-complex-survey-data.html#cb62-8" aria-hidden="true" tabindex="-1"></a>yrbss_df[ , <span class="st">&quot;t11c&quot;</span> ] <span class="ot">&lt;-</span> c11c[ <span class="fu">match</span>( yrbss_df[ , <span class="st">&quot;year&quot;</span> ] , <span class="fu">seq</span>( <span class="dv">1991</span> , <span class="dv">2011</span> , <span class="dv">2</span> ) ) ]</span></code></pre></div>
</div>
<div id="analysis-examples-with-the-survey-library-1" class="section level2 unnumbered hasAnchor">
<h2>Analysis Examples with the <code>survey</code> library  <a href="trend-analysis-of-complex-survey-data.html#analysis-examples-with-the-survey-library-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Construct a complex sample survey design and match the <a href="https://www.cdc.gov/healthyschools/data/yrbs/pdf/yrbs_conducting_trend_analyses.pdf#page=6">published unadjusted prevalence rates</a>:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="trend-analysis-of-complex-survey-data.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>( <span class="at">survey.lonely.psu =</span> <span class="st">&quot;adjust&quot;</span> )</span>
<span id="cb63-2"><a href="trend-analysis-of-complex-survey-data.html#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="trend-analysis-of-complex-survey-data.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb63-4"><a href="trend-analysis-of-complex-survey-data.html#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="trend-analysis-of-complex-survey-data.html#cb63-5" aria-hidden="true" tabindex="-1"></a>des <span class="ot">&lt;-</span> </span>
<span id="cb63-6"><a href="trend-analysis-of-complex-survey-data.html#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">svydesign</span>(</span>
<span id="cb63-7"><a href="trend-analysis-of-complex-survey-data.html#cb63-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">id =</span> <span class="sc">~</span>psu , </span>
<span id="cb63-8"><a href="trend-analysis-of-complex-survey-data.html#cb63-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">strata =</span> <span class="sc">~</span><span class="fu">interaction</span>( stratum , year ) ,</span>
<span id="cb63-9"><a href="trend-analysis-of-complex-survey-data.html#cb63-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> yrbss_df , </span>
<span id="cb63-10"><a href="trend-analysis-of-complex-survey-data.html#cb63-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">weights =</span> <span class="sc">~</span>weight , </span>
<span id="cb63-11"><a href="trend-analysis-of-complex-survey-data.html#cb63-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">nest =</span> <span class="cn">TRUE</span></span>
<span id="cb63-12"><a href="trend-analysis-of-complex-survey-data.html#cb63-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb63-13"><a href="trend-analysis-of-complex-survey-data.html#cb63-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-14"><a href="trend-analysis-of-complex-survey-data.html#cb63-14" aria-hidden="true" tabindex="-1"></a>prevalence_over_time <span class="ot">&lt;-</span></span>
<span id="cb63-15"><a href="trend-analysis-of-complex-survey-data.html#cb63-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">svyby</span>( </span>
<span id="cb63-16"><a href="trend-analysis-of-complex-survey-data.html#cb63-16" aria-hidden="true" tabindex="-1"></a>        <span class="sc">~</span> ever_smoked , </span>
<span id="cb63-17"><a href="trend-analysis-of-complex-survey-data.html#cb63-17" aria-hidden="true" tabindex="-1"></a>        <span class="sc">~</span> year , </span>
<span id="cb63-18"><a href="trend-analysis-of-complex-survey-data.html#cb63-18" aria-hidden="true" tabindex="-1"></a>        des , </span>
<span id="cb63-19"><a href="trend-analysis-of-complex-survey-data.html#cb63-19" aria-hidden="true" tabindex="-1"></a>        svymean , </span>
<span id="cb63-20"><a href="trend-analysis-of-complex-survey-data.html#cb63-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">na.rm =</span> <span class="cn">TRUE</span> </span>
<span id="cb63-21"><a href="trend-analysis-of-complex-survey-data.html#cb63-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb63-22"><a href="trend-analysis-of-complex-survey-data.html#cb63-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-23"><a href="trend-analysis-of-complex-survey-data.html#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="co"># confirm prevalence rates match published estimates</span></span>
<span id="cb63-24"><a href="trend-analysis-of-complex-survey-data.html#cb63-24" aria-hidden="true" tabindex="-1"></a><span class="co"># of high school students that ever smoked</span></span>
<span id="cb63-25"><a href="trend-analysis-of-complex-survey-data.html#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(</span>
<span id="cb63-26"><a href="trend-analysis-of-complex-survey-data.html#cb63-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">all.equal</span>( </span>
<span id="cb63-27"><a href="trend-analysis-of-complex-survey-data.html#cb63-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>( <span class="fu">coef</span>( prevalence_over_time ) , <span class="dv">3</span> ) , </span>
<span id="cb63-28"><a href="trend-analysis-of-complex-survey-data.html#cb63-28" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>( .<span class="dv">701</span> , .<span class="dv">695</span> , .<span class="dv">713</span> , .<span class="dv">702</span> , .<span class="dv">704</span> , .<span class="dv">639</span> , .<span class="dv">584</span> , .<span class="dv">543</span> , .<span class="dv">503</span> , .<span class="dv">463</span> , .<span class="dv">447</span> ) ,</span>
<span id="cb63-29"><a href="trend-analysis-of-complex-survey-data.html#cb63-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">check.attributes =</span> <span class="cn">FALSE</span></span>
<span id="cb63-30"><a href="trend-analysis-of-complex-survey-data.html#cb63-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb63-31"><a href="trend-analysis-of-complex-survey-data.html#cb63-31" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="calculate-joinpoints-needed" class="section level2 unnumbered hasAnchor">
<h2>Calculate Joinpoints Needed<a href="trend-analysis-of-complex-survey-data.html#calculate-joinpoints-needed" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Using the orthogonal coefficients (linear, quadratic, cubic terms) that we previously added to our <code>yrbss_df</code> object before constructing the multi-year stacked survey design, determine how many joinpoints will be needed for a trend analysis.</p>
<p>Epidemiological models typically control for possible confounding variables such as age, sex, and race/ethnicity, so those have been included alongside the linear, cubic, and quadratic year terms.</p>
<p>Calculate the “ever smoked” regression, adjusted by sex, grade, race/ethnicity, and linear year contrast:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="trend-analysis-of-complex-survey-data.html#cb64-1" aria-hidden="true" tabindex="-1"></a>linyear <span class="ot">&lt;-</span> </span>
<span id="cb64-2"><a href="trend-analysis-of-complex-survey-data.html#cb64-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">svyglm</span>(</span>
<span id="cb64-3"><a href="trend-analysis-of-complex-survey-data.html#cb64-3" aria-hidden="true" tabindex="-1"></a>        ever_smoked <span class="sc">~</span> sex <span class="sc">+</span> race4 <span class="sc">+</span> grade <span class="sc">+</span> t11l , </span>
<span id="cb64-4"><a href="trend-analysis-of-complex-survey-data.html#cb64-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">design =</span> des , </span>
<span id="cb64-5"><a href="trend-analysis-of-complex-survey-data.html#cb64-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> quasibinomial</span>
<span id="cb64-6"><a href="trend-analysis-of-complex-survey-data.html#cb64-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb64-7"><a href="trend-analysis-of-complex-survey-data.html#cb64-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-8"><a href="trend-analysis-of-complex-survey-data.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>( linyear )</span></code></pre></div>
<p>The linear year-contrast variable <code>t11l</code> is significant. Therefore, there is probably going to be some sort of trend. A linear trend by itself does not need joinpoints. Not one, just zero joinpoints. If the linear term were the only significant term (out of linear, quadratic, cubic), then we would not need to calculate a joinpoint. In other words, we would not need to figure out where to best break our time trend into two, three, or even four segments.</p>
<p>Since the linear trend is significant, we know there is at least one change across the entire 1991 to 2011 period.</p>
<hr />
<p><strong>Interpretation note</strong> about segments of time: The linear term <code>t11l</code> was significant, so we probably have a significant linear trend somewhere to report. Now we need to figure out when that significant linear trend started and when it ended. It might be semantically true that there was a significant linear decrease in high school aged smoking over the entire period of our data 1991-2011; however, it’s inexact to end this analysis after only detecting a linear trend. The purpose of the following few steps is to <em>cordon off</em> different time points from one another. As you’ll see later, there actually was not any detectable decrease from 1991-1999. The entirety of the decline in smoking occurred over the period from 1999-2011. So these next (methodologically tricky) steps serve to provide you and your audience with a more careful statement of statistical significance. It’s not technically wrong to conclude that smoking declined over the period of 1991-2011, it’s just verbose.</p>
<p>Think of it as the difference between “humans first walked on the moon in the sixties” and “humans first walked on the moon in 1969” - both statements are correct, but the latter exhibits greater scientific precision.</p>
<hr />
<p>Calculate the “ever smoked” binomial regression, adjusted by sex, grade, race/ethnicity, and both linear and quadratic year contrasts. Notice the addition of <code>t11q</code>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="trend-analysis-of-complex-survey-data.html#cb65-1" aria-hidden="true" tabindex="-1"></a>quadyear <span class="ot">&lt;-</span></span>
<span id="cb65-2"><a href="trend-analysis-of-complex-survey-data.html#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">svyglm</span>(</span>
<span id="cb65-3"><a href="trend-analysis-of-complex-survey-data.html#cb65-3" aria-hidden="true" tabindex="-1"></a>        ever_smoked <span class="sc">~</span> sex <span class="sc">+</span> race4 <span class="sc">+</span> grade <span class="sc">+</span> t11l <span class="sc">+</span> t11q , </span>
<span id="cb65-4"><a href="trend-analysis-of-complex-survey-data.html#cb65-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">design =</span> des , </span>
<span id="cb65-5"><a href="trend-analysis-of-complex-survey-data.html#cb65-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> quasibinomial </span>
<span id="cb65-6"><a href="trend-analysis-of-complex-survey-data.html#cb65-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb65-7"><a href="trend-analysis-of-complex-survey-data.html#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="trend-analysis-of-complex-survey-data.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>( quadyear )</span></code></pre></div>
<p>The linear year-contrast variable is significant but the quadratic year-contrast variable is also significant. Therefore, we should use joinpoint software (the <code>segmented</code> package) for this analysis. A significant quadratic trend needs one joinpoint.</p>
<p>Since both linear and quadratic terms are significant, we can also move ahead and test whether the cubic term is also significant.</p>
<p>Calculate the “ever smoked” binomial regression, adjusted by sex, grade, race/ethnicity, and linear, quadratic, and cubic year contrasts. Notice the addition of <code>t11c</code>:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="trend-analysis-of-complex-survey-data.html#cb66-1" aria-hidden="true" tabindex="-1"></a>cubyear <span class="ot">&lt;-</span></span>
<span id="cb66-2"><a href="trend-analysis-of-complex-survey-data.html#cb66-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">svyglm</span>(</span>
<span id="cb66-3"><a href="trend-analysis-of-complex-survey-data.html#cb66-3" aria-hidden="true" tabindex="-1"></a>        ever_smoked <span class="sc">~</span> sex <span class="sc">+</span> race4 <span class="sc">+</span> grade <span class="sc">+</span> t11l <span class="sc">+</span> t11q <span class="sc">+</span> t11c , </span>
<span id="cb66-4"><a href="trend-analysis-of-complex-survey-data.html#cb66-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">design =</span> des , </span>
<span id="cb66-5"><a href="trend-analysis-of-complex-survey-data.html#cb66-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> quasibinomial </span>
<span id="cb66-6"><a href="trend-analysis-of-complex-survey-data.html#cb66-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb66-7"><a href="trend-analysis-of-complex-survey-data.html#cb66-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb66-8"><a href="trend-analysis-of-complex-survey-data.html#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>( cubyear )</span></code></pre></div>
<p>The cubic year-contrast term is also significant in this model. Therefore, we might potentially evaluate this trend using two joinpoints. In other words, a significant result for all linear, quadratic, and cubic year contrasts at this point means we might be able to evaluate three distinct trends (separated by our two joinpoints) across the broader 1991 - 2011 time period of analysis.</p>
<p>Although we might now have the statistical ability to analyze three distinct time periods (separated by two joinpoints) across our data, the utility of this depends on the circumstances. Cubic and higher polynomials account for not only the direction of change but also the pace of that change, allowing statistical statements that might not be of interest to an audience: While it might be an exercise in precision to conclude that smoking rates dropped quickest across 1999-2003 and less quickly across 2003-2011, that scientific pair of findings may not be as compelling as the simpler (quadratic but not cubic) statement that smoking rates have dropped across the period of 1999-2011.</p>
</div>
<div id="calculate-predicted-marginals" class="section level2 unnumbered hasAnchor">
<h2>Calculate Predicted Marginals<a href="trend-analysis-of-complex-survey-data.html#calculate-predicted-marginals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Calculate the survey-year-independent predictor effects and store these results:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="trend-analysis-of-complex-survey-data.html#cb67-1" aria-hidden="true" tabindex="-1"></a>marginals <span class="ot">&lt;-</span> </span>
<span id="cb67-2"><a href="trend-analysis-of-complex-survey-data.html#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">svyglm</span>(</span>
<span id="cb67-3"><a href="trend-analysis-of-complex-survey-data.html#cb67-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">formula =</span> ever_smoked <span class="sc">~</span> sex <span class="sc">+</span> race4 <span class="sc">+</span> grade ,</span>
<span id="cb67-4"><a href="trend-analysis-of-complex-survey-data.html#cb67-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">design =</span> des , </span>
<span id="cb67-5"><a href="trend-analysis-of-complex-survey-data.html#cb67-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> quasibinomial</span>
<span id="cb67-6"><a href="trend-analysis-of-complex-survey-data.html#cb67-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>Run these marginals through the <code>svypredmeans</code> function. For archaeology fans out there, this function emulates the <code>PREDMARG</code> statement in the ancient language of SUDAAN:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="trend-analysis-of-complex-survey-data.html#cb68-1" aria-hidden="true" tabindex="-1"></a>( means_for_joinpoint <span class="ot">&lt;-</span> <span class="fu">svypredmeans</span>( marginals , <span class="sc">~</span><span class="fu">factor</span>( year ) ) )</span></code></pre></div>
<p>Clean up these results a bit in preparation for a joinpoint analysis:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="trend-analysis-of-complex-survey-data.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coerce the results to a data.frame object</span></span>
<span id="cb69-2"><a href="trend-analysis-of-complex-survey-data.html#cb69-2" aria-hidden="true" tabindex="-1"></a>means_for_joinpoint <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>( means_for_joinpoint )</span>
<span id="cb69-3"><a href="trend-analysis-of-complex-survey-data.html#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="trend-analysis-of-complex-survey-data.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the row names as the survey year</span></span>
<span id="cb69-5"><a href="trend-analysis-of-complex-survey-data.html#cb69-5" aria-hidden="true" tabindex="-1"></a>means_for_joinpoint[ , <span class="st">&quot;year&quot;</span> ] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>( <span class="fu">rownames</span>( means_for_joinpoint ) )</span>
<span id="cb69-6"><a href="trend-analysis-of-complex-survey-data.html#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="trend-analysis-of-complex-survey-data.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co"># must be sorted, just in case it&#39;s not already</span></span>
<span id="cb69-8"><a href="trend-analysis-of-complex-survey-data.html#cb69-8" aria-hidden="true" tabindex="-1"></a>means_for_joinpoint <span class="ot">&lt;-</span> means_for_joinpoint[ <span class="fu">order</span>( means_for_joinpoint[ , <span class="st">&quot;year&quot;</span> ] ) , ]</span></code></pre></div>
</div>
<div id="identify-joinpoints-or-breakpoints" class="section level2 unnumbered hasAnchor">
<h2>Identify Joinpoint(s) or Breakpoint(s)<a href="trend-analysis-of-complex-survey-data.html#identify-joinpoints-or-breakpoints" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s take a look at how confident we are in the value at each adjusted timepoint. Carrying out a trend analysis requires creating new weights to fit a piecewise linear regression. First, create that weight variable:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="trend-analysis-of-complex-survey-data.html#cb70-1" aria-hidden="true" tabindex="-1"></a>means_for_joinpoint[ , <span class="st">&quot;wgt&quot;</span> ] <span class="ot">&lt;-</span> <span class="fu">with</span>( means_for_joinpoint, ( mean <span class="sc">/</span> SE ) <span class="sc">^</span> <span class="dv">2</span> ) </span></code></pre></div>
<p>Second, fit a piecewise linear regression, estimating the ‘starting’ linear model with the usual <code>lm</code> function using the log values and the weights:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="trend-analysis-of-complex-survey-data.html#cb71-1" aria-hidden="true" tabindex="-1"></a>o <span class="ot">&lt;-</span> <span class="fu">lm</span>( <span class="fu">log</span>( mean ) <span class="sc">~</span> year , <span class="at">weights =</span> wgt , <span class="at">data =</span> means_for_joinpoint )</span></code></pre></div>
<p>Now that the regression has been structured correctly, estimate the year that our complex survey trend should be broken into two or more segments:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="trend-analysis-of-complex-survey-data.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(segmented)</span>
<span id="cb72-2"><a href="trend-analysis-of-complex-survey-data.html#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="trend-analysis-of-complex-survey-data.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co"># find only one joinpoint</span></span>
<span id="cb72-4"><a href="trend-analysis-of-complex-survey-data.html#cb72-4" aria-hidden="true" tabindex="-1"></a>os <span class="ot">&lt;-</span> <span class="fu">segmented</span>( o , <span class="sc">~</span>year )</span>
<span id="cb72-5"><a href="trend-analysis-of-complex-survey-data.html#cb72-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-6"><a href="trend-analysis-of-complex-survey-data.html#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>( os )</span></code></pre></div>
<p>Look for the <code>Estimated Break-Point(s)</code> in that result - that’s the critical number from this joinpoint analysis. The <code>segmented</code> package uses an iterative procedure (described in the article below); between-year solutions are returned and should be rounded to the nearest time point in the analysis. The joinpoint software implements two estimating algorithms: the grid-search and the Hudson algorithm. For more detail about these methods, see <a href="http://onlinelibrary.wiley.com/doi/10.1002/sim.1545/abstract">Muggeo V. (2003) Estimating regression models with unknown break-points. Statistics in Medicine, 22: 3055-3071.</a>.</p>
<p>Obtain the annual percent change estimates for each time point:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="trend-analysis-of-complex-survey-data.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slope</span>( os , <span class="at">APC =</span> <span class="cn">TRUE</span> )</span></code></pre></div>
<p>The confidence intervals for the annual percent change (APC) may be different from the ones returned by <a href="surveillance.cancer.gov/joinpoint/">NCI’s Joinpoint Software</a>; for further details, check out <a href="http://onlinelibrary.wiley.com/doi/10.1002/sim.3850/abstract">Muggeo V. (2010) A Comment on `Estimating average annual per cent change in trend analysis’ by Clegg et al., Statistics in Medicine; 28, 3670-3682. Statistics in Medicine, 29, 1958-1960.</a></p>
<p>This analysis returned similar results to the NCI’s Joinpoint Regression Program by estimating a joinpoint at <code>year=1999</code> - and, more precisely, that the start of that decreasing trend in smoking prevalence happened at an APC of -3.92 percent. That is, <code>slope2</code> from the output above.</p>
<p>Remember that the cubic-year model above had significant terms as well. Therefore, it would be statistically defensible to calculate two joinpoints rather than only one. However, for this analyses, breaking the 1999-2011 trend into two separate downward trends might not be of interest to the audience. Looking at the <code>slope2</code> and <code>slope3</code> estimates and confidence intervals, we might be able to conclude that “ever smoking” decreased across 1999-2003 and also decreased (albeit less rapidly) across 2003-2011. However, communicating two <em>consecutive</em> downward trends might not be of much interest to a lay audience. Forgoing a second possible joinpoint makes sense when the direction of change is more compelling than the pace of change:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="trend-analysis-of-complex-survey-data.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># find two joinpoints rather than only one</span></span>
<span id="cb74-2"><a href="trend-analysis-of-complex-survey-data.html#cb74-2" aria-hidden="true" tabindex="-1"></a>os2 <span class="ot">&lt;-</span> <span class="fu">segmented</span>( o , <span class="sc">~</span>year , <span class="at">npsi =</span> <span class="dv">2</span> )</span>
<span id="cb74-3"><a href="trend-analysis-of-complex-survey-data.html#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="trend-analysis-of-complex-survey-data.html#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>( os2 )</span>
<span id="cb74-5"><a href="trend-analysis-of-complex-survey-data.html#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="trend-analysis-of-complex-survey-data.html#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">slope</span>( os2 , <span class="at">APC =</span> <span class="cn">TRUE</span> )</span></code></pre></div>
</div>
<div id="make-statistically-defensible-conclusions" class="section level2 unnumbered hasAnchor">
<h2>Make statistically defensible conclusions<a href="trend-analysis-of-complex-survey-data.html#make-statistically-defensible-conclusions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>After identifying the change point for smoking prevalence, we can create two regression models (one for each time segment - if we had two joinpoints, we would need three regression models). The first model covers the years leading up to (and including) the joinpoint (i.e., 1991 to 1999). The second model includes the years from the joinpoint forward (i.e., 1999 to 2011). So start with 1991, 1993, 1995, 1997, 1999, the five year-points before (and including) 1999:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="trend-analysis-of-complex-survey-data.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate a five-timepoint linear contrast vector</span></span>
<span id="cb75-2"><a href="trend-analysis-of-complex-survey-data.html#cb75-2" aria-hidden="true" tabindex="-1"></a>c5l <span class="ot">&lt;-</span> <span class="fu">contr.poly</span>( <span class="dv">5</span> )[ , <span class="dv">1</span> ]</span>
<span id="cb75-3"><a href="trend-analysis-of-complex-survey-data.html#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="trend-analysis-of-complex-survey-data.html#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tack the five-timepoint linear contrast vectors onto the current survey design object</span></span>
<span id="cb75-5"><a href="trend-analysis-of-complex-survey-data.html#cb75-5" aria-hidden="true" tabindex="-1"></a>des <span class="ot">&lt;-</span> <span class="fu">update</span>( des , <span class="at">t5l =</span> c5l[ <span class="fu">match</span>( year , <span class="fu">seq</span>( <span class="dv">1991</span> , <span class="dv">1999</span> , <span class="dv">2</span> ) ) ] )</span>
<span id="cb75-6"><a href="trend-analysis-of-complex-survey-data.html#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="trend-analysis-of-complex-survey-data.html#cb75-7" aria-hidden="true" tabindex="-1"></a>pre_91_99 <span class="ot">&lt;-</span></span>
<span id="cb75-8"><a href="trend-analysis-of-complex-survey-data.html#cb75-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">svyglm</span>(</span>
<span id="cb75-9"><a href="trend-analysis-of-complex-survey-data.html#cb75-9" aria-hidden="true" tabindex="-1"></a>        ever_smoked <span class="sc">~</span> sex <span class="sc">+</span> race4 <span class="sc">+</span> grade <span class="sc">+</span> t5l ,</span>
<span id="cb75-10"><a href="trend-analysis-of-complex-survey-data.html#cb75-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">design =</span> <span class="fu">subset</span>( des , year <span class="sc">&lt;=</span> <span class="dv">1999</span> ) , </span>
<span id="cb75-11"><a href="trend-analysis-of-complex-survey-data.html#cb75-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> quasibinomial</span>
<span id="cb75-12"><a href="trend-analysis-of-complex-survey-data.html#cb75-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb75-13"><a href="trend-analysis-of-complex-survey-data.html#cb75-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-14"><a href="trend-analysis-of-complex-survey-data.html#cb75-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>( pre_91_99 )</span>
<span id="cb75-15"><a href="trend-analysis-of-complex-survey-data.html#cb75-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-16"><a href="trend-analysis-of-complex-survey-data.html#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="co"># confirm 1991-1999 trend coefficient matches published estimates</span></span>
<span id="cb75-17"><a href="trend-analysis-of-complex-survey-data.html#cb75-17" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>( <span class="fu">round</span>( pre_91_99<span class="sc">$</span>coefficients[<span class="st">&#39;t5l&#39;</span>] , <span class="dv">5</span> ) <span class="sc">==</span> .<span class="dv">03704</span> )</span></code></pre></div>
<p>This reproduces the calculations behind the sentence on <a href="https://www.cdc.gov/healthyschools/data/yrbs/pdf/yrbs_conducting_trend_analyses.pdf#page=6">pdf page 6 of the original document</a>: <strong>In this example, T5L_L had a p-value=0.52261 and beta=0.03704. Therefore, there was “no significant change in the prevalence of ever smoking a cigarette during 1991-1999.”</strong></p>
<p>Then move on to 1999, 2001, 2003, 2005, 2007, 2009, and 2011, the seven year-points after (and including) 1999:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="trend-analysis-of-complex-survey-data.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate a seven-timepoint linear contrast vector</span></span>
<span id="cb76-2"><a href="trend-analysis-of-complex-survey-data.html#cb76-2" aria-hidden="true" tabindex="-1"></a>c7l <span class="ot">&lt;-</span> <span class="fu">contr.poly</span>( <span class="dv">7</span> )[ , <span class="dv">1</span> ]</span>
<span id="cb76-3"><a href="trend-analysis-of-complex-survey-data.html#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="trend-analysis-of-complex-survey-data.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tack the seven-timepoint linear contrast vectors onto the current survey design object</span></span>
<span id="cb76-5"><a href="trend-analysis-of-complex-survey-data.html#cb76-5" aria-hidden="true" tabindex="-1"></a>des <span class="ot">&lt;-</span> <span class="fu">update</span>( des , <span class="at">t7l =</span> c7l[ <span class="fu">match</span>( year , <span class="fu">seq</span>( <span class="dv">1999</span> , <span class="dv">2011</span> , <span class="dv">2</span> ) ) ] )</span>
<span id="cb76-6"><a href="trend-analysis-of-complex-survey-data.html#cb76-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-7"><a href="trend-analysis-of-complex-survey-data.html#cb76-7" aria-hidden="true" tabindex="-1"></a>post_99_11 <span class="ot">&lt;-</span></span>
<span id="cb76-8"><a href="trend-analysis-of-complex-survey-data.html#cb76-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">svyglm</span>(</span>
<span id="cb76-9"><a href="trend-analysis-of-complex-survey-data.html#cb76-9" aria-hidden="true" tabindex="-1"></a>        ever_smoked <span class="sc">~</span> sex <span class="sc">+</span> race4 <span class="sc">+</span> grade <span class="sc">+</span> t7l ,</span>
<span id="cb76-10"><a href="trend-analysis-of-complex-survey-data.html#cb76-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">design =</span> <span class="fu">subset</span>( des , year <span class="sc">&gt;=</span> <span class="dv">1999</span> ) , </span>
<span id="cb76-11"><a href="trend-analysis-of-complex-survey-data.html#cb76-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> quasibinomial</span>
<span id="cb76-12"><a href="trend-analysis-of-complex-survey-data.html#cb76-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb76-13"><a href="trend-analysis-of-complex-survey-data.html#cb76-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb76-14"><a href="trend-analysis-of-complex-survey-data.html#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>( post_99_11 )</span>
<span id="cb76-15"><a href="trend-analysis-of-complex-survey-data.html#cb76-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-16"><a href="trend-analysis-of-complex-survey-data.html#cb76-16" aria-hidden="true" tabindex="-1"></a><span class="co"># confirm 1999-2011 trend coefficient matches published estimates</span></span>
<span id="cb76-17"><a href="trend-analysis-of-complex-survey-data.html#cb76-17" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>( <span class="fu">round</span>( post_99_11<span class="sc">$</span>coefficients[<span class="st">&#39;t7l&#39;</span>] , <span class="dv">5</span> ) <span class="sc">==</span> <span class="sc">-</span><span class="fl">0.99165</span> )</span></code></pre></div>
<p>This reproduces the calculations behind the sentence on <a href="https://www.cdc.gov/healthyschools/data/yrbs/pdf/yrbs_conducting_trend_analyses.pdf#page=6">pdf page 6 of the original document</a>: <strong>In this example, T7L_R had a p-value&lt;0.0001 and beta=-0.99165. Therefore, there was a “significant linear decrease in the prevalence of ever smoking a cigarette during 1999-2011.”</strong></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="structural-equation-models-sem-with-complex-survey-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="youth-risk-behavior-surveillance-system-yrbss.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ajdamico/asdfree/edit/master/trendy.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
